\usepackage[amsmath,thmmarks,framed]{ntheorem2}
\usepackage{color}
\usepackage{framed}

%\usepackage[pdftex]{graphicx}
\usepackage{graphicx}

\newcommand{\Z}{\mathbb{Z}}
\newcommand{\N}{\mathbb{N}}
\newcommand{\R}{\mathbb{R}}

\newcommand{\HRule}{\rule[0mm]{0.4\linewidth}{0.5pt}}


%\newcommand{\HRule}{\rule[2mm]{0.4\linewidth}{0.5pt}}

\makeatletter
\newtheoremstyle{nonumberplainperso}
  {\item[\hskip\labelsep \theorem@headerfont  \textcolor{\currentcolor}{\underline{ \textcolor{black}{##1\ }}} ]}%
  {\item[\hskip\labelsep \theorem@headerfont \textcolor{\currentcolor}{\underline{ \textcolor{black}{ ##1\  : ##3}}}]}
\newtheoremstyle{nonumberplainperso2}
  {\item[\hskip\labelsep \theorem@headerfont  \textcolor{\currentcolor}{\underline{ \textcolor{black}{##1\ }}} ]}%
  {\item[\hskip\labelsep \theorem@headerfont  \textcolor{\currentcolor}{\underline{ \textcolor{black}{##1\  ##3 }}}]}
\newtheoremstyle{nonumberbreakperso}
  {\item[\rlap{\vbox{\hbox{\hskip\labelsep \theorem@headerfont
           \textcolor{\currentcolor}{\underline{ \textcolor{black}{##1 }}}\theorem@separator}\hbox{\strut}}}]}%
  {\item[\rlap{\vbox{\hbox{\hskip\labelsep \theorem@headerfont
           \textcolor{\currentcolor}{\underline{ \textcolor{black}{##1\ : ##3 }}} \theorem@separator}\hbox{\strut}}}]}
\newtheoremstyle{nonumberbreakperso2}
  {\item[\rlap{\vbox{\hbox{\hskip\labelsep \theorem@headerfont
          \textcolor{\currentcolor}{\underline{ \textcolor{black}{ ##1}}} \theorem@separator}\hbox{\strut}}}]}%
  {\item[\rlap{\vbox{\hbox{\hskip\labelsep \theorem@headerfont
           \textcolor{\currentcolor}{\underline{ \textcolor{black}{##1\ ##3}}}\theorem@separator}\hbox{\strut}}}]}
\makeatother


\newcommand{\defcolor}{green}
\newcommand{\thmcolor}{red}
\newcommand{\rmcolor}{blue}
\newcommand{\demcolor}{yellow}
\newcommand{\lemcolor}{magenta}
\newcommand{\propcolor}{cyan}
\newcommand{\currentcolor}{\defcolor}

\newcommand{\renewframeperso}[4]{
\renewcommand{\currentcolor}{#1}
\renewcommand{\HRule}{\rule[0mm]{#4\linewidth}{0.5pt}}
\renewcommand*\FrameCommand{{\color{white}\vrule width #2}{\color{#1}\vrule width 1pt  \HRule \hspace{#3}\hspace{-#4\linewidth}  }}
}

\theoremstyle{nonumberbreakperso}
\theoremseparator{}
\theoremprework{\bigskip\hrule}
\theorempostwork{\hrule\bigskip}
\newframedtheorem{adefinition}{Définition}


\theoremstyle{nonumberbreakperso}
\theoremheaderfont{\normalfont\bfseries}\theorembodyfont{\slshape}
\theoremseparator{}
\newframedtheorem{athm}{Théorème}

\theoremstyle{nonumberplainperso2}
\theorembodyfont{\upshape}
\theoremseparator{}
\newframedtheorem{arem}{Remarque}
\newframedtheorem{aex}{Exemple}
\newframedtheorem{aexs}{Exemples}


\theoremheaderfont{\itshape}\theorembodyfont{\upshape}
\theoremstyle{nonumberplainperso}
\theoremseparator{}

\newframedtheorem{adem}{Dém}

\theoremstyle{nonumberbreakperso2}
\newframedtheorem{alem}{ Lemme}

\theoremindent0cm

\newframedtheorem{aprop}{ Proposition}
\newframedtheorem{apropriete}{ Propriété}


\newenvironment{definition}[1][]{\renewframeperso{\defcolor}{0pt}{5pt}{0.4}\begin{adefinition}[#1]}{\end{adefinition}}
\newenvironment{thm}[1][]{\renewframeperso{\thmcolor}{0pt}{5pt}{0.4}\begin{athm}[#1]}{\end{athm}}
\newenvironment{rem}[1][]{\renewframeperso{\rmcolor}{15pt}{5pt}{0.2}\begin{arem}[#1]}{\end{arem}}
\newenvironment{ex}[1][]{\renewframeperso{\rmcolor}{15pt}{5pt}{0.4}\begin{aex}[#1]}{\end{aex}}
\newenvironment{exs}[1][]{\renewframeperso{\rmcolor}{15pt}{5pt}{0.4}\begin{aexs}[#1]}{\end{aexs}}
\newenvironment{dem}[1][]{\renewframeperso{\demcolor}{15pt}{5pt}{0.4}\begin{adem}[#1]}{\end{adem}}
\newenvironment{lem}[1][]{\renewframeperso{\lemcolor}{10pt}{5pt}{0.4}\begin{alem}[#1]}{\end{alem}}
\newenvironment{prop}[1][]{\renewframeperso{\propcolor}{0pt}{5pt}{0.4}\begin{aprop}[#1]}{\end{aprop}}
\newenvironment{propriete}[1][]{\renewframeperso{\propcolor}{0pt}{5pt}{0.4}\begin{apropriete}[#1]}{\end{apropriete}}