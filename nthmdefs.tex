\usepackage[amsmath,thmmarks,framed]{ntheorem2}
\usepackage{color}
\usepackage{framed}

%\usepackage[pdftex]{graphicx}
\usepackage{graphicx}

\newcommand{\Z}{\mathbb{Z}}
\newcommand{\N}{\mathbb{N}}
\newcommand{\R}{\mathbb{R}}

\newcommand{\HRule}{\rule[0mm]{0.4\linewidth}{0.5pt}}


%\newcommand{\HRule}{\rule[2mm]{0.4\linewidth}{0.5pt}}

\makeatletter
\newtheoremstyle{nonumberplainperso}
  {\item[\hskip\labelsep \theorem@headerfont ##1\  ]}%
  {\item[\hskip\labelsep \theorem@headerfont ##1\  : ##3]}
\newtheoremstyle{nonumberbreakperso}
  {\item[\rlap{\vbox{\hbox{\hskip\labelsep \theorem@headerfont
          ##1 \theorem@separator}\hbox{\strut}}}]}%
  {\item[\rlap{\vbox{\hbox{\hskip\labelsep \theorem@headerfont
          ##1\ : ##3\theorem@separator}\hbox{\strut}}}]}
\makeatother


\newcommand{\defcolor}{green}
\newcommand{\thmcolor}{red}
\newcommand{\rmcolor}{blue}
\newcommand{\demcolor}{yellow}
\newcommand{\lemcolor}{magenta}
\newcommand{\propcolor}{cyan}
\newcommand{\currentcolor}{\defcolor}

\renewcommand*\FrameCommand{{\color{\currentcolor}\vrule width 3pt  \HRule \hspace{20pt}\hspace{-0.4\linewidth}  }}


\theoremstyle{nonumberbreakperso}
\theoremseparator{.}
\theoremprework{\bigskip\hrule}
\theorempostwork{\hrule\bigskip}
\newframedtheorem{adefinition}{\textcolor{\currentcolor}{\underline{ \textcolor{black}{Définition}}}}


\theoremstyle{nonumberbreakperso}
\theoremheaderfont{\normalfont\bfseries}\theorembodyfont{\slshape}
\theoremseparator{}
\newframedtheorem{athm}{\textcolor{\currentcolor}{\underline{ \textcolor{black}{Théorème}}}}

\theoremstyle{nonumberplainperso}
\theorembodyfont{\upshape}
\theoremseparator{}
\newframedtheorem{arem}{ \textcolor{\currentcolor}{\underline{ \textcolor{black}{Remarque}}}} 
\newframedtheorem{aex}{ \textcolor{\currentcolor}{\underline{ \textcolor{black}{Exemple}}}}
\newframedtheorem{aexs}{ \textcolor{\currentcolor}{\underline{ \textcolor{black}{Exemples}}}}


\theoremheaderfont{\sc}\theorembodyfont{\upshape}
\theoremstyle{nonumberplainperso}
\theoremseparator{}
\theoremsymbol{\rule{1ex}{1ex}}

\newframedtheorem{adem}{ \textcolor{\currentcolor}{\underline{ \textcolor{black}{Dém}}}}

\theoremstyle{nonumberbreakperso}
\theoremindent0.5cm
\newframedtheorem{alem}{ \textcolor{\currentcolor}{\underline{ \textcolor{black}{Lemme}}}}

\theoremindent0cm

\newframedtheorem{aprop}{ \textcolor{\currentcolor}{\underline{ \textcolor{black}{Proposition}}}}
\newframedtheorem{apropriete}{ \textcolor{\currentcolor}{\underline{ \textcolor{black}{Propriété}}}}


\newenvironment{definition}[1][]{\renewcommand{\currentcolor}{\defcolor}\begin{adefinition}[#1]}{\end{adefinition}}
\newenvironment{thm}[1][]{\renewcommand{\currentcolor}{\thmcolor}\begin{athm}[#1]}{\end{athm}}
\newenvironment{rem}[1][]{\renewcommand{\currentcolor}{\rmcolor}\begin{arem}[#1]}{\end{arem}}
\newenvironment{ex}[1][]{\renewcommand{\currentcolor}{\rmcolor}\begin{aex}[#1]}{\end{aex}}
\newenvironment{exs}[1][]{\renewcommand{\currentcolor}{\rmcolor}\begin{aexs}[#1]}{\end{aexs}}
\newenvironment{dem}[1][]{\renewcommand{\currentcolor}{\demcolor}\begin{adem}[#1]}{\end{adem}}
\newenvironment{lem}[1][]{\renewcommand{\currentcolor}{\lemcolor}\begin{alem}[#1]}{\end{alem}}
\newenvironment{prop}[1][]{\renewcommand{\currentcolor}{\propcolor}\begin{aprop}[#1]}{\end{aprop}}
\newenvironment{propriete}[1][]{\renewcommand{\currentcolor}{\propcolor}\begin{apropriete}[#1]}{\end{apropriete}}